<!DOCTYPE html>
<html>
<head>
    <title>GLRS Recovery Connect</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <!-- Terms & Conditions Modal -->
        <div id="termsModal" class="modal">
            <div class="modal-content">
                <h2>Terms of Service & Privacy Policy</h2>
                <div class="terms-scroll">
                    <h3>IMPORTANT NOTICE</h3>
                    <p><strong>THIS IS NOT A CRISIS SERVICE. If you are experiencing thoughts of self-harm or suicide, we are required by law to contact emergency services for a 5150 evaluation. Please call 988 for the Suicide & Crisis Lifeline instead.</strong></p>
                    
                    <h3>Service Description</h3>
                    <p>Guiding Light Recovery Services provides NON-CLINICAL peer support and recovery coaching. We are not therapists, counselors, or medical professionals. Our services complement but do not replace professional treatment.</p>
                    
                    <h3>Age Requirement</h3>
                    <p>You must be 18 years or older to use this service.</p>
                    
                    <h3>Data Collection & Privacy</h3>
                    <p>We collect and store:</p>
                    <ul>
                        <li>Your name, email, and contact information</li>
                        <li>Recovery-related information and check-ins</li>
                        <li>Communication records with coaches and peers</li>
                        <li>Progress tracking data</li>
                    </ul>
                    
                    <h3>Data Security</h3>
                    <p>Your data is stored in secure Google Sheets with restricted access. Only authorized coaches can view your information. All data is automatically deleted if you delete your account.</p>
                    
                    <h3>Mandatory Reporting</h3>
                    <p>We are required to report:</p>
                    <ul>
                        <li>Imminent danger to yourself (will result in 5150 hold)</li>
                        <li>Threats of harm to others</li>
                        <li>Suspected child or elder abuse</li>
                    </ul>
                    
                    <h3>Communication</h3>
                    <p>By agreeing, you consent to receive emails about your recovery support services, including appointment reminders and coach communications.</p>
                </div>
                
                <div class="terms-agreement">
                    <label>
                        <input type="checkbox" id="ageCheck"> I am 18 years or older
                    </label>
                    <label>
                        <input type="checkbox" id="termsCheck"> I have read and accept the Terms of Service
                    </label>
                    <label>
                        <input type="checkbox" id="privacyCheck"> I understand the Privacy Policy and data handling
                    </label>
                    <label>
                        <input type="checkbox" id="crisisCheck"> I understand this is NOT emergency/crisis care
                    </label>
                </div>
                
                <button id="acceptTerms" disabled>Accept and Continue</button>
            </div>
        </div>

        <!-- Main App Header -->
        <div class="app-header">
            <h1>GLRS Recovery Connect</h1>
            <div id="userInfo" class="user-info hidden">
                <span id="userName"></span>
                <span id="userTier" class="tier-badge"></span>
                <button onclick="logout()" class="logout-btn">Logout</button>
            </div>
        </div>
        
        <!-- Login Screen -->
        <div id="loginScreen" class="screen">
            <div class="login-container">
                <h2>Sign In</h2>
                <div class="login-form">
                    <input type="text" id="loginInput" placeholder="Username or Email">
                    <input type="password" id="password" placeholder="Password">
                    <label class="remember-me">
                        <input type="checkbox" id="rememberMe"> Remember me
                    </label>
                    <button onclick="login()" class="primary-btn">Sign In</button>
                    <p class="login-help">Contact your coach if you forgot your password</p>
                </div>
            </div>
        </div>
        
        <!-- PIR Main Interface -->
        <div id="pirInterface" class="screen hidden">
            <div class="main-content">
                <div class="left-column">
                    <nav class="nav-menu">
                        <button onclick="showSection('dashboard')" class="nav-btn active">Dashboard</button>
                        <button onclick="showSection('checkin')" class="nav-btn">Daily Check-In</button>
                        <button onclick="showSection('progress')" class="nav-btn">My Progress</button>
                        <button onclick="showSection('connections')" class="nav-btn" id="connectionsBtn">Connections</button>
                        <button onclick="showSection('messages')" class="nav-btn" id="messagesBtn">Messages</button>
                        <button onclick="showSection('homework')" class="nav-btn">Homework</button>
                        <button onclick="showSection('resources')" class="nav-btn">Resources</button>
                    </nav>
                    
                    <div class="tier-info">
                        <h4>Your Access Level</h4>
                        <p id="tierDescription"></p>
                        <p id="daysInRecovery"></p>
                    </div>
                </div>
                
                <div class="right-column">
                    <!-- Dashboard Section -->
                    <div id="dashboardSection" class="content-section">
                        <h2>Welcome Back!</h2>
                        <div class="quick-stats">
                            <div class="stat-card">
                                <h3 id="streakDays">0</h3>
                                <p>Days in Recovery</p>
                            </div>
                            <div class="stat-card">
                                <h3 id="weeklyCheckins">0/7</h3>
                                <p>Weekly Check-ins</p>
                            </div>
                            <div class="stat-card">
                                <h3 id="nextSession">--</h3>
                                <p>Next Session</p>
                            </div>
                        </div>
                        
                        <div class="alerts-section">
                            <h3>Important Reminders</h3>
                            <div id="alertsList"></div>
                        </div>
                    </div>
                    
                    <!-- Check-in Section -->
                    <div id="checkinSection" class="content-section hidden">
                        <h2>Daily Check-In</h2>
                        <form id="checkinForm">
                            <div class="form-group">
                                <label>Overall Mood <span id="moodValue">5</span>/10</label>
                                <input type="range" id="mood" min="1" max="10" value="5" oninput="updateSlider('mood')">
                            </div>
                            
                            <div class="form-group">
                                <label>Cravings Level <span id="cravingsValue">1</span>/10</label>
                                <input type="range" id="cravings" min="1" max="10" value="1" oninput="updateSlider('cravings')">
                            </div>
                            
                            <div class="form-group">
                                <label>Sleep Quality</label>
                                <select id="sleep">
                                    <option>Excellent</option>
                                    <option>Good</option>
                                    <option>Fair</option>
                                    <option>Poor</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>Today's Win</label>
                                <input type="text" id="dailyWin" placeholder="One positive thing from today...">
                            </div>
                            
                            <div class="form-group">
                                <label>Gratitude</label>
                                <input type="text" id="gratitude" placeholder="I'm grateful for...">
                            </div>
                            
                            <div class="form-group">
                                <label>Additional Thoughts</label>
                                <textarea id="thoughts" placeholder="How are you feeling today?"></textarea>
                            </div>
                            
                            <div class="crisis-notice">
                                <p>⚠️ If you're having thoughts of self-harm, please call 988 immediately.</p>
                            </div>
                            
                            <button type="submit" class="save-btn">Save Check-In</button>
                        </form>
                    </div>
                    
                    <!-- Progress Section -->
                    <div id="progressSection" class="content-section hidden">
                        <h2>Your Recovery Journey</h2>
                        <div id="progressContent">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Connections Section -->
                    <div id="connectionsSection" class="content-section hidden">
                        <h2>Peer Connections</h2>
                        <div id="connectionsContent">
                            <p>Connection features become available after 30 days in recovery.</p>
                        </div>
                    </div>
                    
                    <!-- Messages Section -->
                    <div id="messagesSection" class="content-section hidden">
                        <h2>Messages</h2>
                        <div id="messagesContent">
                            <p>Messaging becomes available after 30 days in recovery.</p>
                        </div>
                    </div>
                    
                    <!-- Homework Section -->
                    <div id="homeworkSection" class="content-section hidden">
                        <h2>Session Homework</h2>
                        <div id="homeworkList"></div>
                    </div>
                    
                    <!-- Resources Section -->
                    <div id="resourcesSection" class="content-section hidden">
                        <h2>Recovery Resources</h2>
                        <div class="resource-list">
                            <div class="resource-card">
                                <h3>Crisis Support</h3>
                                <p>988 - Suicide & Crisis Lifeline</p>
                                <p>911 - Medical Emergency</p>
                            </div>
                            <div class="resource-card">
                                <h3>Meeting Finder</h3>
                                <p>AA: aa.org</p>
                                <p>NA: na.org</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Coach Interface -->
        <div id="coachInterface" class="screen hidden">
            <div class="main-content">
                <div class="left-column">
                    <nav class="nav-menu">
                        <button onclick="showCoachSection('overview')" class="nav-btn active">Overview</button>
                        <button onclick="showCoachSection('pirs')" class="nav-btn">My PIRs</button>
                        <button onclick="showCoachSection('alerts')" class="nav-btn">Alerts</button>
                        <button onclick="showCoachSection('approvals')" class="nav-btn">Approvals</button>
                        <button onclick="showCoachSection('reports')" class="nav-btn">Reports</button>
                    </nav>
                </div>
                
                <div class="right-column">
                    <!-- Coach sections populated by JavaScript -->
                    <div id="coachContent"></div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="app.js"></script>
</body>
</html>
